# Rankings Defects Per Year Shows 0.0000

Date: 2025-12-03
Status: Resolved

## Symptoms

- Top 10 rankings on the website show 0.0000 for all defects/year values
- Both brands and models affected

## Root Cause Analysis

Investigated the data pipeline to find where the issue originates:

1. Checked `data/processed/rankings.json` - found it contains `avg_defects_per_inspection` field instead of `defects_per_year`
2. Checked `data/processed/brand_stats.json` - correctly contains `defects_per_year` values (e.g., 0.027517)
3. The `ranking_entry_format()` function in `data_process.py` expects and outputs `defects_per_year`
4. The website `RankingEntry` TypeScript type expects `defects_per_year`

Conclusion: The `rankings.json` file in `data/processed/` was generated by an older version of the code that output `avg_defects_per_inspection`. The current code is correct, but the cached data was stale.

## Resolution

Re-ran Stage 2 (`data_process.py`) to regenerate `rankings.json` with the correct field names.

## Verification

After re-running the pipeline:

1. Confirmed `rankings.json` contains `defects_per_year` field (e.g., "defects_per_year": 0.01637)
2. Website build succeeds
3. Rankings now show non-zero values (e.g., Ferrari at 0.0164 defects/year)
